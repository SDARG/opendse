<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
<link href="prettify.css" type="text/css" rel="stylesheet" />
<link href="tutstyle.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="prettify.js"></script>
<title>2. Communication and Routings (OpenDSE Tutorial)</title>
</head>
<body onload="prettyPrint()">

	<h1>2. Communication and Routings (OpenDSE Tutorial)</h1>
	<p>Version: 1.0.0 - Date: 2024-10-21</p>
	<p>(<a href="tutorial.xhtml">Tutorial Overview</a>)</p>

	<p>The application can be extended with communication tasks and the specification might also be initialized with routings:</p>
	
	<pre class="prettyprint">public class Part2 {
	public static void main(String[] args) {
		/*
		 * An application might be extended with communication tasks.
		 * Communication tasks enable the communication over multiple resources.
		 */
		Application&lt;Task, Dependency&gt; application = new Application&lt;Task, Dependency&gt;();
		Task t1 = new Task("t1");
		Communication c1 = new Communication("c1");
		Task t2 = new Task("t2");
		application.addVertex(t1);
		application.addVertex(t2);
		application.addVertex(c1);
		application.addEdge(new Dependency("d1"), t1, c1);
		application.addEdge(new Dependency("d2"), c1, t2);
		/*
		 */
		Architecture&lt;Resource, Link&gt; architecture = new Architecture&lt;Resource, Link&gt;();
		Resource r1 = new Resource("r1");
		r1.setAttribute("costs", 100);
		Resource r2 = new Resource("r2");
		r2.setAttribute("costs", 50);
		Resource bus = new Resource("bus");
		bus.setAttribute("costs", 20);
		Link l1 = new Link("l1");
		Link l2 = new Link("l2");
		architecture.addVertex(r1);
		architecture.addVertex(bus);
		architecture.addVertex(r2);
		architecture.addEdge(l1, r1, bus);
		architecture.addEdge(l2, bus, r2);
		/*
		 */
		Mappings&lt;Task, Resource&gt; mappings = new Mappings&lt;Task, Resource&gt;();
		Mapping&lt;Task, Resource&gt; m1 = new Mapping&lt;Task, Resource&gt;("m1", t1, r1);
		Mapping&lt;Task, Resource&gt; m2 = new Mapping&lt;Task, Resource&gt;("m2", t2, r2);
		mappings.add(m1);
		mappings.add(m2);
		/*
		 * The additional parameter Routings for a specification might be used
		 * to restrict where communication tasks can be routed. If we do not
		 * pass the Routings object, all communication tasks can be routed over
		 * any resource.
		 */
		Specification specification = new Specification(application, architecture, mappings);
		/*
		 */
		SpecificationWriter writer = new SpecificationWriter();
		writer.write(specification, "specs/Specification2.xml");
		/*
		 */
		SpecificationViewer.view(specification);
	}
}
</pre>
	
	The corresponding XML representation looks as follows (the routings are added automatically in the Java implementations):
	
	<pre class="prettyprint">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;specification xmlns="http://opendse.sourceforge.net"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://opendse.sourceforge.net http://opendse.sourceforge.net/schema.xsd"&gt;
  &lt;architecture&gt;
    &lt;resource id="bus"&gt;
      &lt;attributes&gt;
        &lt;attribute name="costs" type="INT"&gt;20&lt;/attribute&gt;
      &lt;/attributes&gt;
    &lt;/resource&gt;
    &lt;resource id="r1"&gt;
      &lt;attributes&gt;
        &lt;attribute name="costs" type="INT"&gt;100&lt;/attribute&gt;
      &lt;/attributes&gt;
    &lt;/resource&gt;
    &lt;resource id="r2"&gt;
      &lt;attributes&gt;
        &lt;attribute name="costs" type="INT"&gt;50&lt;/attribute&gt;
      &lt;/attributes&gt;
    &lt;/resource&gt;
    &lt;link id="l2" source="bus" destination="r2" orientation="UNDIRECTED"/&gt;
    &lt;link id="l1" source="r1" destination="bus" orientation="UNDIRECTED"/&gt;
  &lt;/architecture&gt;
  &lt;application&gt;
    &lt;task id="t2"/&gt;
    &lt;task id="t1"/&gt;
    &lt;communication id="c1"/&gt;
    &lt;dependency id="d1" source="t1" destination="c1" orientation="DIRECTED"/&gt;
    &lt;dependency id="d2" source="c1" destination="t2" orientation="DIRECTED"/&gt;
    &lt;functions&gt;
      &lt;function anchor="t2"&gt;
        &lt;attributes&gt;
          &lt;attribute name="ID" type="STRING"&gt;func0&lt;/attribute&gt;
        &lt;/attributes&gt;
      &lt;/function&gt;
    &lt;/functions&gt;
  &lt;/application&gt;
  &lt;mappings&gt;
    &lt;mapping id="m1" source="t1" target="r1"/&gt;
    &lt;mapping id="m2" source="t2" target="r2"/&gt;
  &lt;/mappings&gt;
  &lt;routings&gt;
    &lt;routing source="c1"&gt;
      &lt;resource id="bus"/&gt;
      &lt;resource id="r1"/&gt;
      &lt;resource id="r2"/&gt;
      &lt;link id="l2" source="bus" destination="r2" orientation="UNDIRECTED"/&gt;
      &lt;link id="l1" source="r1" destination="bus" orientation="UNDIRECTED"/&gt;
    &lt;/routing&gt;
  &lt;/routings&gt;
&lt;/specification&gt;
</pre>

	<p>The resulting specification looks as follows in the viewer:</p>
	
	<img src="img/Specification2.png" alt="Communication and Routings"/>

</body>
</html>
